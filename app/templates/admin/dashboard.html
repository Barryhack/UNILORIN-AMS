{% extends 'base.html' %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Welcome Section -->
    <div class="mb-8">
        <div class="bg-gradient-to-r from-[#002147] to-[#003366] rounded-2xl shadow-xl p-8">
            <div class="flex flex-col lg:flex-row justify-between items-center gap-4">
                <div>
                    <h1 class="text-3xl font-bold text-white mb-2">Welcome back, {{ current_user.name }}!</h1>
                    <p class="text-[#FFD700] text-lg">{{ datetime.now().strftime('%A, %B %d, %Y') }}</p>
                </div>
                <div class="text-white text-right bg-white/10 p-4 rounded-xl backdrop-blur-sm">
                    <p class="text-sm text-[#FFD700]">Last Login</p>
                    <p class="font-semibold">{{ current_user.last_login.strftime('%Y-%m-%d %H:%M:%S') if current_user.last_login else 'First Login' }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Total Users Card -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-blue-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Total Users</p>
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white">{{ stats.total_users }}</h3>
                </div>
                <div class="bg-blue-100 dark:bg-blue-900 p-3 rounded-lg">
                    <i class="fas fa-users text-blue-600 dark:text-blue-400 text-xl"></i>
                </div>
            </div>
        </div>

        <!-- Students Card -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-green-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Students</p>
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white">{{ stats.total_students }}</h3>
                </div>
                <div class="bg-green-100 dark:bg-green-900 p-3 rounded-lg">
                    <i class="fas fa-user-graduate text-green-600 dark:text-green-400 text-xl"></i>
                </div>
            </div>
        </div>

        <!-- Lecturers Card -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-purple-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Lecturers</p>
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white">{{ stats.total_lecturers }}</h3>
                </div>
                <div class="bg-purple-100 dark:bg-purple-900 p-3 rounded-lg">
                    <i class="fas fa-chalkboard-teacher text-purple-600 dark:text-purple-400 text-xl"></i>
                </div>
            </div>
        </div>

        <!-- Today's Attendance Card -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-yellow-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Today's Attendance</p>
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white">{{ stats.today_attendance }}</h3>
                </div>
                <div class="bg-yellow-100 dark:bg-yellow-900 p-3 rounded-lg">
                    <i class="fas fa-clipboard-check text-yellow-600 dark:text-yellow-400 text-xl"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Quick Actions</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <a href="{{ url_for('admin.users') }}" class="group">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center space-x-4">
                        <div class="bg-blue-100 dark:bg-blue-900 p-3 rounded-lg group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors">
                            <i class="fas fa-user-plus text-blue-600 dark:text-blue-400 text-xl"></i>
                        </div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Manage Users</span>
                    </div>
                </div>
            </a>

            <a href="{{ url_for('admin.departments') }}" class="group">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center space-x-4">
                        <div class="bg-green-100 dark:bg-green-900 p-3 rounded-lg group-hover:bg-green-200 dark:group-hover:bg-green-800 transition-colors">
                            <i class="fas fa-building text-green-600 dark:text-green-400 text-xl"></i>
                        </div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Departments</span>
                    </div>
                </div>
            </a>

            <a href="{{ url_for('admin.courses') }}" class="group">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center space-x-4">
                        <div class="bg-purple-100 dark:bg-purple-900 p-3 rounded-lg group-hover:bg-purple-200 dark:group-hover:bg-purple-800 transition-colors">
                            <i class="fas fa-book text-purple-600 dark:text-purple-400 text-xl"></i>
                        </div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Courses</span>
                    </div>
                </div>
            </a>

            <a href="{{ url_for('admin.reports') }}" class="group">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center space-x-4">
                        <div class="bg-yellow-100 dark:bg-yellow-900 p-3 rounded-lg group-hover:bg-yellow-200 dark:group-hover:bg-yellow-800 transition-colors">
                            <i class="fas fa-chart-bar text-yellow-600 dark:text-yellow-400 text-xl"></i>
                        </div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Reports</span>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <!-- Recent Activity and Logs -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Recent Activity -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Recent Activity</h3>
            <div class="space-y-4">
                {% for activity in recent_activities %}
                <div class="flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
                            <i class="fas fa-history text-blue-600 dark:text-blue-400"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-gray-900 dark:text-white">
                            {{ activity.action }}
                        </p>
                        <p class="text-sm text-gray-500 dark:text-gray-400">
                            {{ activity.details }}
                        </p>
                        <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">
                            {{ activity.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Recent Logins -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Recent Logins</h3>
            <div class="space-y-4">
                {% for log in recent_logins %}
                <div class="flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center">
                            <i class="fas fa-sign-in-alt text-green-600 dark:text-green-400"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-gray-900 dark:text-white">
                            {{ log.user.name if log.user else 'Unknown User' }}
                        </p>
                        <p class="text-sm text-gray-500 dark:text-gray-400">
                            {{ log.action }} - {{ log.status }}
                        </p>
                        <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">
                            {{ log.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- Add custom styles for animations -->
<style>
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .animate-fadeIn {
        animation: fadeIn 0.5s ease-out forwards;
    }

    .hover\:scale-card:hover {
        transform: scale(1.02);
        transition: transform 0.2s ease-in-out;
    }
</style>

<!-- Add custom scripts for interactivity -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add animation classes to elements
    const cards = document.querySelectorAll('.bg-white');
    cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.classList.add('animate-fadeIn');
    });

    // Initialize any charts or real-time updates here
});
</script>
{% endblock %}
